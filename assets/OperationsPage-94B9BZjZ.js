import{_ as B,b as u,L as D,E as x,J as A,d as L,o as p,w as g,a as e,c as h,F as M,g as y,t as r,f as c,M as U,N as R,s as S,e as $,O as E,A as P,P as Z,S as F,D as O}from"./index-Ba_bCfkX.js";import{_ as T}from"./IconArrowLeft-DhGOpvLI.js";import{M as j}from"./MainLayout-BV2BQElL.js";const I={class:"date-range-modal"},N={class:"date-range-modal__weekdays"},q={class:"date-range-modal__calendar-container"},W={class:"select-option-atom__label"},z={class:"date-range-modal__footer"},J=["disabled"],Q={__name:"DateRangePickerModal",props:{modelValue:Boolean,range:{type:Object,default:()=>({start:null,end:null})}},emits:["update:modelValue","update:range","apply"],setup(_,{emit:H}){const f=_,m=H,v=["ПН","ВТ","СР","ЧТ","ПТ","СБ","ВС"],n=u({...f.range}),d=u([]),w=l=>{l&&d.value.push(l)};D(()=>{d.value=[]});const V=["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"];x(n,l=>{setTimeout(()=>{const i=new Set;if(l&&l.start){const a=new Date(l.start),t=l.end?new Date(l.end):a,[s,o]=a>t?[t,a]:[a,t];let k=new Date(s.getFullYear(),s.getMonth(),1);for(;k<=o;)i.add(V[k.getMonth()]),k.setMonth(k.getMonth()+1)}d.value.forEach(a=>{if(!a)return;const t=a.querySelector(".select-option-atom__label");if(t&&i.has(t.textContent)){if(a.classList.add("select-option-atom--selected"),!a.querySelector(".select-option-atom__check")){const o=document.createElement("span");o.className="select-option-atom__check",o.innerHTML=`
            <svg width="24" height="24" viewBox="0 0 24 24">
              <circle cx="12" cy="12" r="12" fill="#4868EA" />
              <polyline points="7,13 11,17 17,9" fill="none" stroke="#fff" stroke-width="2.2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
          `,a.appendChild(o)}}else{a.classList.remove("select-option-atom--selected");const o=a.querySelector(".select-option-atom__check");o&&o.remove()}})},0)},{deep:!0,immediate:!0}),x(()=>f.range,l=>{n.value={...l}},{deep:!0});function b(){m("update:range",{...n.value}),m("apply",{...n.value}),m("update:modelValue",!1)}function C(){m("update:modelValue",!1)}return(l,i)=>{const a=A("VDatePicker");return p(),L(U,{visible:_.modelValue,"onUpdate:visible":C},{default:g(()=>[e("div",I,[e("div",{class:"date-range-modal__header"},[i[2]||(i[2]=e("div",{class:"date-range-modal__title"},"Выберите период",-1)),e("button",{class:"date-range-modal__close",onClick:C},i[1]||(i[1]=[e("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[e("path",{d:"M18 6L6 18",stroke:"#9DA4AE","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}),e("path",{d:"M6 6L18 18",stroke:"#9DA4AE","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)]))]),e("div",N,[(p(),h(M,null,y(v,t=>e("span",{key:t},r(t),1)),64))]),e("div",q,[c(a,{modelValue:n.value,"onUpdate:modelValue":i[0]||(i[0]=t=>n.value=t),modelModifiers:{range:!0},rows:12,columns:1,step:1,locale:"ru","first-day-of-week":2,masks:{weekdays:"WW",title:"MMMM"},class:"date-range-modal__calendar",borderless:"false","title-position":"left","header-props":{next:!1,prev:!1}},{"header-title":g(({title:t,page:s})=>[e("div",{class:"select-option-atom",ref:w},[e("span",W,r(t.charAt(0).toUpperCase()+t.slice(1)),1)])]),_:1},8,["modelValue"])]),e("div",z,[e("button",{class:"date-range-modal__apply",disabled:!n.value||!n.value.start||!n.value.end,onClick:b},"Применить",8,J)])])]),_:1},8,["visible"])}}},Y=B(Q,[["__scopeId","data-v-d16d7bf5"]]),G={width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},K=["fill"],X=["fill"],ee={__name:"IconSearch",props:{color:{type:String,default:"#80899C"}},setup(_){return(H,f)=>(p(),h("svg",G,[e("path",{d:"M16.7771 15.3629C17.5518 15.1066 18.4392 15.2866 19.0555 15.9029L22.0971 18.9445C22.9676 19.8151 22.9676 21.2265 22.0971 22.0971C21.2265 22.9676 19.8151 22.9676 18.9445 22.0971L15.9029 19.0555C15.2866 18.4392 15.1066 17.5518 15.3629 16.7771L13.293 14.7072L14.7072 13.293L16.7771 15.3629Z",fill:_.color},null,8,K),e("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M1 9C1 4.58172 4.58172 1 9 1C13.4183 1 17 4.58172 17 9C17 13.4183 13.4183 17 9 17C4.58172 17 1 13.4183 1 9ZM9 3C5.68629 3 3 5.68629 3 9C3 12.3137 5.68629 15 9 15C12.3137 15 15 12.3137 15 9C15 5.68629 12.3137 3 9 3Z",fill:_.color},null,8,X)]))}},te=R("operations",{state:()=>({operationsByDate:[{date:"10 мая",items:[{bank:"Сбербанк",type:"Покупка",amount:-3020.66,count:10,price:302.41,icon:new URL("/investApp/assets/sber-BHfRv_fn.svg",import.meta.url).href},{bank:"Точка",type:"Покупка",amount:-4820.66,count:10,price:481.33,icon:new URL("data:image/svg+xml,%3csvg%20width='32'%20height='32'%20viewBox='0%200%2032%2032'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3crect%20width='32'%20height='32'%20fill='%237F41E0'%20/%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M14.3949%2022.45H17.6049V13.8682H21.3499V10.65H10.6499V13.8682H14.3949V22.45Z'%20fill='white'%20/%3e%3c/svg%3e",import.meta.url).href},{bank:"Модульбанк",type:"Продажа",amount:8200.66,count:10,price:802.88,icon:new URL("data:image/svg+xml,%3csvg%20width='32'%20height='32'%20viewBox='0%200%2032%2032'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M0.320068%205.99995C0.320068%202.87995%202.88007%200.319946%206.00007%200.319946H26.0001C29.1201%200.319946%2031.6801%202.87995%2031.6801%205.99995V25.9999C31.6801%2029.1199%2029.1201%2031.6799%2026.0001%2031.6799H6.00007C2.88007%2031.6799%200.320068%2029.1199%200.320068%2025.9999C0.320068%2025.9999%200.320068%205.99995%200.320068%205.99995Z'%20fill='%23072DA0'%20/%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M6%2032H26.08C29.36%2032%2032%2029.36%2032%2026V6C32%202.64%2029.36%200%2026%200H6C2.64%200%200%202.64%200%206V26C0%2029.36%202.64%2032%206%2032ZM0.64%206C0.64%203.04%203.04%200.64%206%200.64H26C28.96%200.64%2031.36%203.04%2031.36%206V26C31.36%2028.96%2028.96%2031.36%2026%2031.36H6C3.04%2031.36%200.64%2028.96%200.64%2026V6ZM11.2%208H8V14.4H11.2V17.6H8V24H11.2V20.8H14.4V24H17.6V20.8H20.8V24H24V20.8H20.8V17.6H24V11.2H20.8V8H14.4V11.2H11.2V8ZM17.6%2017.6V20.8H14.4V17.6H17.6ZM17.6%2014.4H20.8V17.6H17.6V14.4ZM17.6%2014.4V11.2H14.4V14.4H17.6Z'%20fill='white'%20/%3e%3c/svg%3e",import.meta.url).href}]},{date:"4 мая",items:[{bank:"Сбербанк",type:"Покупка",amount:-3020.66,count:10,price:302.41,icon:new URL("/investApp/assets/sber-BHfRv_fn.svg",import.meta.url).href},{bank:"Модульбанк",type:"Продажа",amount:8200.66,count:10,price:802.88,icon:new URL("data:image/svg+xml,%3csvg%20width='32'%20height='32'%20viewBox='0%200%2032%2032'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M0.320068%205.99995C0.320068%202.87995%202.88007%200.319946%206.00007%200.319946H26.0001C29.1201%200.319946%2031.6801%202.87995%2031.6801%205.99995V25.9999C31.6801%2029.1199%2029.1201%2031.6799%2026.0001%2031.6799H6.00007C2.88007%2031.6799%200.320068%2029.1199%200.320068%2025.9999C0.320068%2025.9999%200.320068%205.99995%200.320068%205.99995Z'%20fill='%23072DA0'%20/%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M6%2032H26.08C29.36%2032%2032%2029.36%2032%2026V6C32%202.64%2029.36%200%2026%200H6C2.64%200%200%202.64%200%206V26C0%2029.36%202.64%2032%206%2032ZM0.64%206C0.64%203.04%203.04%200.64%206%200.64H26C28.96%200.64%2031.36%203.04%2031.36%206V26C31.36%2028.96%2028.96%2031.36%2026%2031.36H6C3.04%2031.36%200.64%2028.96%200.64%2026V6ZM11.2%208H8V14.4H11.2V17.6H8V24H11.2V20.8H14.4V24H17.6V20.8H20.8V24H24V20.8H20.8V17.6H24V11.2H20.8V8H14.4V11.2H11.2V8ZM17.6%2017.6V20.8H14.4V17.6H17.6ZM17.6%2014.4H20.8V17.6H17.6V14.4ZM17.6%2014.4V11.2H14.4V14.4H17.6Z'%20fill='white'%20/%3e%3c/svg%3e",import.meta.url).href},{bank:"Точка",type:"Покупка",amount:-4820.66,count:10,price:481.33,icon:new URL("data:image/svg+xml,%3csvg%20width='32'%20height='32'%20viewBox='0%200%2032%2032'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3crect%20width='32'%20height='32'%20fill='%237F41E0'%20/%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M14.3949%2022.45H17.6049V13.8682H21.3499V10.65H10.6499V13.8682H14.3949V22.45Z'%20fill='white'%20/%3e%3c/svg%3e",import.meta.url).href}]},{date:"27 апреля",items:[{bank:"Сбербанк",type:"Покупка",amount:-3020.66,count:10,price:302.41,icon:new URL("/investApp/assets/sber-BHfRv_fn.svg",import.meta.url).href},{bank:"Модульбанк",type:"Продажа",amount:8200.66,count:10,price:802.88,icon:new URL("data:image/svg+xml,%3csvg%20width='32'%20height='32'%20viewBox='0%200%2032%2032'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M0.320068%205.99995C0.320068%202.87995%202.88007%200.319946%206.00007%200.319946H26.0001C29.1201%200.319946%2031.6801%202.87995%2031.6801%205.99995V25.9999C31.6801%2029.1199%2029.1201%2031.6799%2026.0001%2031.6799H6.00007C2.88007%2031.6799%200.320068%2029.1199%200.320068%2025.9999C0.320068%2025.9999%200.320068%205.99995%200.320068%205.99995Z'%20fill='%23072DA0'%20/%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M6%2032H26.08C29.36%2032%2032%2029.36%2032%2026V6C32%202.64%2029.36%200%2026%200H6C2.64%200%200%202.64%200%206V26C0%2029.36%202.64%2032%206%2032ZM0.64%206C0.64%203.04%203.04%200.64%206%200.64H26C28.96%200.64%2031.36%203.04%2031.36%206V26C31.36%2028.96%2028.96%2031.36%2026%2031.36H6C3.04%2031.36%200.64%2028.96%200.64%2026V6ZM11.2%208H8V14.4H11.2V17.6H8V24H11.2V20.8H14.4V24H17.6V20.8H20.8V24H24V20.8H20.8V17.6H24V11.2H20.8V8H14.4V11.2H11.2V8ZM17.6%2017.6V20.8H14.4V17.6H17.6ZM17.6%2014.4H20.8V17.6H17.6V14.4ZM17.6%2014.4V11.2H14.4V14.4H17.6Z'%20fill='white'%20/%3e%3c/svg%3e",import.meta.url).href}]}]}),actions:{}}),ae={class:"operations-page__body"},oe={class:"page__header"},se={class:"operations-page__filters"},le={class:"operations-page__search-wrap"},ne={class:"operations-page__selects"},ie={class:"filter-bubble__content"},re={class:"filter-bubble__label"},de={class:"filter-bubble__content"},ce={class:"filter-bubble__label"},pe={class:"operations-page__list"},ue={class:"operations-page__date"},_e={class:"operations-page__cards"},me=["src","alt"],ve={class:"operations-page__info"},ge={class:"operations-page__bank"},he={class:"operations-page__type"},fe={class:"operations-page__meta"},Ve={class:"operations-page__details"},He={__name:"OperationsPage",setup(_){const H=$();function f(){H.back()}const m=te(),v=u(""),n=u("Период"),d=u("all"),w=[{label:"Все операции",value:"all"},{label:"Покупка",value:"buy"},{label:"Продажа",value:"sell"},{label:"Дивиденды",value:"dividends"},{label:"Купоны",value:"coupons"},{label:"Налоги",value:"taxes"}],V=u(!1),b=u({start:"",end:""});function C(a){a&&a.start&&a.end&&(n.value=`${a.start} – ${a.end}`)}const l=S(()=>m.operationsByDate.map(a=>({date:a.date,items:a.items.filter(t=>{const s=d.value==="all"||d.value==="buy"&&t.type==="Покупка"||d.value==="sell"&&t.type==="Продажа",o=!v.value||t.bank.toLowerCase().includes(v.value.toLowerCase());return s&&o})})).filter(a=>a.items.length>0));function i(a){return Math.abs(a).toLocaleString("ru-RU",{minimumFractionDigits:2,maximumFractionDigits:2})}return(a,t)=>(p(),L(j,null,{default:g(()=>[e("section",ae,[e("section",oe,[e("button",{class:"page__back",onClick:f},[c(T,{class:"page__back-icon",color:"#4868EA"}),t[5]||(t[5]=e("span",{class:"page__back-text"},"Back",-1))])]),t[6]||(t[6]=e("h1",{class:"operations-page__title"},"Операции",-1)),e("div",se,[e("div",le,[c(E,{modelValue:v.value,"onUpdate:modelValue":t[0]||(t[0]=s=>v.value=s),placeholder:"Поиск по активам"},{prefix:g(()=>[c(ee)]),_:1},8,["modelValue"])]),e("div",ne,[c(P,{class:"filter-bubble-period",onClick:t[1]||(t[1]=s=>V.value=!0)},{default:g(()=>[e("div",ie,[e("span",re,r(n.value),1),c(Z,{class:"filter-bubble__icon"})])]),_:1}),c(F,{class:"filter-bubble-type",options:w,modelValue:d.value,"onUpdate:modelValue":t[2]||(t[2]=s=>d.value=s)},{default:g(()=>{var s;return[e("div",de,[e("span",ce,r((s=w.find(o=>o.value===d.value))==null?void 0:s.label),1),c(Z)])]}),_:1},8,["modelValue"])])]),e("div",pe,[(p(!0),h(M,null,y(l.value,s=>(p(),h("div",{key:s.date,class:"operations-page__group"},[e("div",ue,r(s.date),1),e("div",_e,[(p(!0),h(M,null,y(s.items,o=>(p(),h("div",{key:o.bank+o.amount+o.type,class:"operations-page__card"},[e("img",{src:o.icon,alt:o.bank,class:"operations-page__icon"},null,8,me),e("div",ve,[e("div",ge,r(o.bank),1),e("div",he,r(o.type),1)]),e("div",fe,[e("div",{class:O(["operations-page__amount",o.amount>0?"operations-page__amount--positive":"operations-page__amount--negative"])},r(o.amount>0?"+":"")+r(i(o.amount))+" ₽ ",3),e("div",Ve,r(o.count)+" шт · "+r(i(o.price)),1)])]))),128))])]))),128))]),c(Y,{modelValue:V.value,"onUpdate:modelValue":t[3]||(t[3]=s=>V.value=s),range:b.value,"onUpdate:range":t[4]||(t[4]=s=>b.value=s),onApply:C},null,8,["modelValue","range"])])]),_:1}))}},ke=B(He,[["__scopeId","data-v-9e674360"]]);export{ke as default};
